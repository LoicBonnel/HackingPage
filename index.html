<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hacking Page</title>

  <!-- CSS séparé dans une balise <style> -->
  <style>
    :root{
      --alert:#b91c1c;
      --dark:#0b1220;
      --card:#071029;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.02);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,#050814 0%, #071029 100%);
      color:#ecf2f8;
      display:flex;
      flex-direction:column;
      min-height:100vh;
    }

    /* bannière d'alerte en haut */
    header.banner{
      background: linear-gradient(90deg,var(--alert),#ef4444);
      color:#fff;
      text-align:center;
      padding:12px 16px;
      font-weight:800;
      letter-spacing:0.02em;
    }

    main{flex:1;display:flex;align-items:center;justify-content:center;padding:28px}

    .card{
      width:100%;
      max-width:980px;
      background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:28px;
      box-shadow:0 10px 30px rgba(2,6,23,0.75);
      border:1px solid rgba(255,255,255,0.03);
    }

    h1{margin:0 0 8px;font-size:24px;color:#fff}
    p.lead{margin:0 0 18px;color:var(--muted);font-size:15px}

    .cols{display:grid;grid-template-columns:1fr 340px;gap:18px}
    .notice{
      background:var(--glass);
      padding:12px;border-radius:8px;margin-bottom:16px;border-left:5px solid var(--alert);
    }

    .notice strong{display:block;color:#fff}
    .small-muted{color:var(--muted);font-size:14px}

    .counter-box{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
      padding:18px;border-radius:10px;text-align:center;border:1px solid rgba(255,255,255,0.02)
    }
    .bignum{font-size:48px;font-weight:800;color:var(--alert);margin:6px 0}
    .cta{
      display:inline-block;margin-top:12px;padding:10px 16px;border-radius:8px;background:var(--alert);
      color:#fff;font-weight:700;text-decoration:none;cursor:pointer;border:none;
    }
    .cta.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}

    .tips{background:var(--glass);padding:14px;border-radius:8px;margin-top:12px}
    ul.small{padding-left:18px;margin:8px 0;color:var(--muted);font-size:14px}
    footer.footer{background:linear-gradient(90deg,#ef4444,var(--alert));color:white;padding:10px 16px;text-align:center;font-weight:600}

    .pulse{animation:pulse 1.6s infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.03)}100%{transform:scale(1)}}

    @media (max-width:900px){.cols{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header class="banner">Une menace a étais détecté</header>

  <main>
    <section class="card" role="main" aria-labelledby="title">
      <h1 id="title">Vous avez cliqué — simulation détectée</h1>
      <p class="lead">
        Cette page fait partie d'un test interne de phishing mené par <strong>[Nom de l'entreprise]</strong>.
        Votre poste <strong>n'est pas compromis</strong>. L'objectif est de vous aider à reconnaître les e-mails à risque.
      </p>

      <div class="cols">
        <div>
          <div class="notice" aria-live="polite">
            <strong>Que se passe-t-il ?</strong>
            <p class="small-muted">Vous avez été redirigé(e) ici parce que vous avez cliqué sur un lien simulé. Suivez la courte formation pour comprendre pourquoi ce message était suspect.</p>
          </div>

          <h3 style="margin-top:6px">Étapes à suivre</h3>
          <ol class="small-muted" style="margin-top:6px">
            <li>Consultez la formation rapide (1–2 min).</li>
            <li>Répondez au quiz de 3 questions pour valider la compréhension.</li>
            <li>Contactez le support IT si vous pensez avoir été réellement affecté.</li>
          </ol>

          <div style="margin-top:14px">
            <button class="cta" id="start-training">Lancer la formation</button>
            <button class="cta secondary" id="show-quiz" style="margin-left:8px">Voir le quiz</button>
          </div>

          <div id="training" style="display:none;margin-top:14px;background:var(--glass);padding:12px;border-radius:8px">
            <p class="small-muted"><strong>Indices à repérer :</strong></p>
            <ul class="small-muted">
              <li>Adresse de l'expéditeur différente du nom affiché.</li>
              <li>URL étrange ou qui ne correspond pas au site officiel.</li>
              <li>Demande urgente d'information sensible ou de virement.</li>
            </ul>
            <p class="small-muted">Après la lecture, répondez aux 3 questions pour voir votre résultat.</p>
          </div>

          <div id="quiz" style="display:none;margin-top:12px;background:var(--glass);padding:12px;border-radius:8px">
            <p class="small-muted"><strong>Quiz rapide (3 questions)</strong></p>
            <form id="quiz-form">
              <div style="margin-bottom:8px">
                <label class="small-muted">1) L'expéditeur est "support@banque-officiel.com". L'adresse semble-t-elle fiable ?<br>
                  <select name="q1" required>
                    <option value="">-- Choisir --</option>
                    <option value="safe">Oui</option>
                    <option value="phish">Non</option>
                  </select>
                </label>
              </div>
              <div style="margin-bottom:8px">
                <label class="small-muted">2) Un lien vous demande de saisir votre mot de passe sur un site inconnu. Que faire ?<br>
                  <select name="q2" required>
                    <option value="">-- Choisir --</option>
                    <option value="ignore">Ne pas saisir et signaler</option>
                    <option value="enter">Saisir pour vérifier</option>
                  </select>
                </label>
              </div>
              <div style="margin-bottom:8px">
                <label class="small-muted">3) Vous recevez une demande urgente de virement par e-mail. Quelle est la bonne action ?<br>
                  <select name="q3" required>
                    <option value="">-- Choisir --</option>
                    <option value="call">Vérifier par téléphone auprès du demandeur</option>
                    <option value="send">Effectuer le virement immédiatement</option>
                  </select>
                </label>
              </div>

              <div style="margin-top:8px">
                <button class="cta" type="submit">Valider le quiz</button>
              </div>
            </form>

            <div id="quiz-result" style="display:none;margin-top:10px" class="small-muted"></div>
          </div>
        </div>

        <aside>
          <div class="counter-box" role="region" aria-label="Compteur de clics">
            <div class="small-muted">Nombre de participants ayant cliqué (campagne)</div>
            <div class="bignum" id="counter">0</div>
            <button id="record-click" class="cta pulse" aria-pressed="false">Enregistrer mon clic</button>
            <p class="small-muted" style="margin-top:8px">Le clic est enregistré pour le rapport de la campagne. Pour enregistrement global, un endpoint serveur sécurisé doit être mis en place.</p>
          </div>

          <div class="tips">
            <div class="small-muted"><strong>Astuce rapide</strong></div>
            <ul class="small-muted">
              <li>Survolez les liens avant de cliquer.</li>
              <li>Activez l'authentification multifacteur.</li>
              <li>Signalez les e-mails suspects au service sécurité.</li>
            </ul>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <footer class="footer">Simulation de sécurité — [Nom de l'entreprise] — Contact : it-support@entreprise.local</footer>

  <script>
    // Comportement côté client (démo)
    const counterEl = document.getElementById('counter');
    const recordBtn = document.getElementById('record-click');
    const startTrainingBtn = document.getElementById('start-training');
    const trainingBox = document.getElementById('training');
    const showQuizBtn = document.getElementById('show-quiz');
    const quizBox = document.getElementById('quiz');
    const quizForm = document.getElementById('quiz-form');
    const quizResult = document.getElementById('quiz-result');

    const STORAGE_KEY = 'phish_demo_counter_v2';
    function readLocalCounter(){ return parseInt(localStorage.getItem(STORAGE_KEY) || '0', 10); }
    function writeLocalCounter(n){ localStorage.setItem(STORAGE_KEY, String(n)); }

    // Init
    counterEl.textContent = readLocalCounter();

    // Button to record a click (visible, explicite)
    recordBtn.addEventListener('click', async () => {
      let n = readLocalCounter() + 1;
      writeLocalCounter(n);
      counterEl.textContent = n;

      // Placeholder: envoi au serveur (à implémenter par IT si nécessaire)
      try{
        const endpoint = '/api/record-click'; // <-- remplacer par l'endpoint réel implémenté par IT
        const payload = { campaign: 'campagne-2025-10', event: 'click', timestamp: new Date().toISOString() };
        await fetch(endpoint, {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)});
      } catch(e){
        console.warn('Endpoint serveur non disponible dans cette démo.');
      }

      recordBtn.textContent = 'Clic enregistré ✓';
      recordBtn.disabled = true;
      setTimeout(()=>{ recordBtn.textContent = 'Enregistrer mon clic'; recordBtn.disabled = false; }, 2200);
    });

    startTrainingBtn.addEventListener('click', ()=>{
      const visible = trainingBox.style.display !== 'none' && trainingBox.style.display !== '';
      trainingBox.style.display = visible ? 'none' : 'block';
      startTrainingBtn.textContent = visible ? 'Lancer la formation' : 'Masquer la formation';
    });

    showQuizBtn.addEventListener('click', ()=>{
      const visible = quizBox.style.display !== 'none' && quizBox.style.display !== '';
      quizBox.style.display = visible ? 'none' : 'block';
      showQuizBtn.textContent = visible ? 'Voir le quiz' : 'Masquer le quiz';
    });

    quizForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const form = new FormData(quizForm);
      let score = 0;
      if(form.get('q1') === 'phish') score++;
      if(form.get('q2') === 'ignore') score++;
      if(form.get('q3') === 'call') score++;
      quizResult.style.display = 'block';
      quizResult.textContent = `Votre score : ${score}/3 — ${ score === 3 ? 'Très bien !' : 'Revoyez les indices dans la formation.' }`;
      // Optionnel : envoyer résultat au serveur (à implémenter par IT)
    });
  </script>
</body>
</html>
